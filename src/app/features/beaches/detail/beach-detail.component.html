<div class="container mt-5"  style="padding-top: 15px;">
 

  <div class="row col-mx-auto">
    <div class="card w-100">
      <div class="card-header">
        <h3 class="my-2">
          <a [routerLink]="['../../list']" class="mr-3">
            <i class="fas fa-arrow-left" aria-hidden="true"></i>
          </a>
          {{ beach.name }} - {{beach.city}} ({{beach.province}})</h3>

          <div class="row mt-3 mb-3" id="foto" style="margin-left: 10px;">
            <img [src]="beach.photo" alt="Spiaggia di {{beach.name}}" class="cropped">
          </div>
      </div>
      <div class="card-body">
        <div class="row">

          <div class="col ml-3">
            <div class="row mt-3 ml-1"><b>Meteo</b><img class="weather-icon ml-2" [src]="beach.weatherIcon"/></div>
<!--            <div class="mb-3"><b class="mr-2">Traffico</b>-->
<!--              <div class="rounded-circle d-inline-block {{getTrafficClass(beach.traffic)}}"><p>{{beach.traffic}}</p></div>-->
<!--            </div>-->
            <div class="row mt-3"><b class="ml-1">Orientamento:</b>{{ beach.orientation }}</div>
            <div class="row mt-3"><b class="ml-1">Posizione (lat, long): </b>{{beach.latitude}}, {{beach.longitude}}</div>
          
          <div class="row mt-3" ><b class="ml-1">Tipo di spiaggia:</b>{{getBeachType(beach.beach_type)}}</div>
          </div> 
          <div class="col-md-6">
            <div id="map" class="map"></div>
            <input id="goMap" class="btn btn-primary text-right mt-2" type="button" (click)="setCenter()" value="Riposiziona">
          </div>
          
          <div class="col-md-12 my-3">
            <h3>Altre info e servizi:</h3>
          
           <!-- <span class="mr-2"><i class="mr-1 fas {{getInfoClass(beach.summer_crowding)}}"></i>Affollamento estivo</span> -->
            <!--span class="mr-2"><i class="mr-1 fas fa-dog {{getEnabledClass(beach.dogs_allowed)}}" title="{{beach.dogs_allowed ? 'Cani ammessi' : 'Cani non ammess'}}"></i>{{beach.dogs_allowed ? 'Cani ammessi' : 'Cani non ammessi'}}</!--span-->
            <span class="mr-2">
              <span class="mr-1 fa-stack fa-1x">
                <i class="fas fa-dog fa-stack-2x {{getEnabledClass(beach.dogs_allowed)}}" title="{{beach.dogs_allowed ? 'Cani ammessi' : 'Cani non ammessi'}}"></i>
                <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.dogs_allowed" title="{{beach.dogs_allowed ? 'Cani ammessi' : 'Cani non ammessi'}}"></i>
              </span> 
            </span>
            <span class="mr-2">
              <span class="mr-1 fa-stack fa-1x">
                <i class="fas fa-medkit fa-stack-2x {{getEnabledClass(beach.first_aid)}}" title="{{beach.first_aid ? 'Kit primo soccorso presente' : 'Kit primo soccorso non presente'}}"></i>
                <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.first_aid" title="{{beach.first_aid ? 'Kit primo soccorso presente' : 'Kit primo soccorso non presente'}}"></i>
              </span>
            </span>
            <span class="mr-2">
              <span class="mr-1 fa-stack fa-1x">
                <i class="fas fa-wifi fa-stack-2x {{getEnabledClass(beach.wifi)}}" title="{{beach.wifi ? 'Wi-Fi disponibile ' : 'Wi-Fi non disponibile'}}"></i>
                <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.wifi" title="{{beach.wifi ? 'Wi-Fi disponibile' : 'Wi-Fi non disponibile'}}"></i>
              </span>
            </span>
            <span class="mr-2">
              <span class="mr-1 fa-stack fa-1x">
                <i class="fas fa-parking fa-stack-2x {{getEnabledClass(beach.park)}}" title="{{beach.park ? 'Parcheggio custodito presente' : 'Assenza parcheggio custodito'}}"></i>
                <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.park" title="{{beach.park ? 'Parcheggio custodito presente' : 'Assenza parcheggio custodito'}}"></i>
              </span> 
            </span>
            <span class="mr-2">
              <span class="mr-1 fa-stack fa-1x">
                <i class="fab fa-accessible-icon fa-stack-2x {{getEnabledClass(beach.disabled_access)}}" title="{{beach.disabled_access? 'Pedana per accesso in spiaggia ai diversamenti abili' : 'Assenza pedana per accesso in spiaggia ai diversamenti abili'}}"></i>
                <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.disabled_access" title="{{beach.disabled_access ? 'Pedana per accesso in spiaggia ai diversamenti abili' : 'Assenza pedana per accesso in spiaggia ai diversamenti abili'}}"></i>
              </span> 
            </span>
            <span class="mr-2">
              <span class="mr-1 fa-stack fa-1x">
                <i class="fas fa-utensils fa-stack-2x {{getEnabledClass(beach.food_service)}}" title="{{beach.food_service? 'Presenza di ristoranti' : 'Assenza di ristoranti'}}"></i>
                <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.food_service" title="{{beach.food_service ? 'Presenza di ristoranti' : 'Assenza di ristoranti'}}"></i>
              </span> 
              </span>
              <span class="mr-2">
                <span class="mr-1 fa-stack fa-1x">
                  <i class="fas fa-life-ring  fa-stack-2x {{getEnabledClass(beach.lifeguard)}}" title="{{beach.lifeguard? 'Servizio di salvataggio in mare' : 'Assenza di bagnino'}}"></i>
                  <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.lifeguard" title="{{beach.lifeguard ? 'Servizio di salvataggio in mare' : 'Assenza di bagnino'}}"></i>
                </span> 
                </span>
                <span class="mr-2">
                <span class="mr-1 fa-stack fa-1x">
                  <i class= "fas fa-store-alt fa-stack-2x {{getEnabledClass(beach.tobacconist)}}" title="{{beach. tobacconist? 'Negozio di merchandising e tabacchi' : 'Nessun negozio di merchandising e tabacchi'}}"></i>
                  <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach. tobacconist" title="{{beach. tobacconist ? 'Negozio di merchandising e tabacchi' : 'Nessun negozio di merchandising e tabacchi'}}"></i>
                </span> 
              </span>
              <span class="mr-2">
                <span class="mr-1 fa-stack fa-1x">
                  <i class="fas fa-users fa-stack-2x {{getEnabledClass(beach.summer_crowding)}}" title="{{beach.summer_crowding? 'Spaggia affollata' : 'Spaggia affollata'}}"></i>
                  <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.summer_crowding" title="{{beach.summer_crowding ? 'Spaggia affollata' : 'Spaggia non affollata'}}"></i>
                </span> 
              </span>
              <span class="mr-2">
                <span class="mr-1 fa-stack fa-1x">
                  <i class="fas fa-umbrella-beach fa-stack-2x {{getEnabledClass(beach.sunbed_umbrella)}}" title="{{beach.sunbed_umbrella? 'Possibilità di affittare ombrelloni e lettini' : 'Non è possibile affittare ombrelloni e lettini'}}"></i>
                  <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.sunbed_umbrella" title="{{beach.sunbed_umbrella ? 'Possibilità di affittare ombrelloni e lettini' : 'Non è possibile affittare ombrelloni e lettini'}}"></i>
                </span> 
              </span>
              <span class="mr-2">
                <span class="mr-1 fa-stack fa-1x">
                  <i class="fas fa-toilet fa-stack-2x {{getEnabledClass(beach.toilet)}}" title="{{beach.toilet? 'Servizi igienici gratuiti' : 'Assenza servizi igienici gratuiti'}}"></i>
                  <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.toilet" title="{{beach.toilet ? 'Servizi igienici gratuiti' : 'Assenza servizi igienici gratuiti'}}"></i>
                </span> 
              </span>
             
              <span class="mr-2">
              <span class="mr-1 fa-stack fa-1x">
                <i class="fas fa-shower fa-stack-2x {{getEnabledClass(beach.showers)}}" title="{{beach.showers? 'Presenza docce calde/fredde' : 'Assenza docce'}}"></i>
                <i class="fas fa-ban fa-stack-2x text-danger" *ngIf="!beach.showers" title="{{beach.showers ? 'Presenza docce calde/fredde' : 'Assenza docce'}}"></i>
              </span> 
            </span>
      </div>

     

    </div>    
   

  
           
           <div class="accordion" id="accordionExample">
            <div class="card">
              <div class="card-header" id="headingOne">
                <h2 class="mb-0">
                  <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                    Indicazioni Stradali
                  </button>
                </h2>
              </div>
          
              <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                <div class="card-body">
                  <!-- <iframe src="https://www.google.com/maps/embed?pb=!1m24!1m12!1m3!1d1562875.8516499593!2d8.045915435458591!3d40.086744494922385!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m9!3e6!4m3!3m2!1d39.219286!2d9.0989074!4m3!3m2!1d40.960499999999996!2d9.58081!5e0!3m2!1sit!2sit!4v1577720297699!5m2!1sit!2sit" width="100%" height="500px" frameborder="0" style="border:0;" allowfullscreen=""></iframe>   -->
                 <!-- questa è la prova fatta da me<iframe src="https://www.google.com/maps/embed/v1/directions?key=AIzaSyDBl453JPQafg3ImRdNI01PYkxRrzVSDQw&origin=Oslo+Norway&destination={{beach.name}}">
                  
                  width="100%" 
                  height="500px"
                   frameborder="0" 
                   style="border:0";
                   allowfullscreen="";
                  API KEY NUOVA AIzaSyDBl453JPQafg3ImRdNI01PYkxRrzVSDQw 
                 </iframe> -->
                 <iframe [src]="mapDestinationUrl"   width="100%"
                 height="450"
                 frameborder="0" style="border:0"
                 allowfullscreen></iframe>
               
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header" id="headingTwo">
                <h2 class="mb-0">
                  <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Admin
                  </button>
                </h2>
              </div>
              <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                <div class="card-body">
                  <a [routerLink]="['../../edit', beach.id]" id="edit" class="btn btn-success">EDIT</a>
                  <button class="btn btn-danger ml-2 mb-3" type="submit" id="delete" (click)="deleteBeach(beach.id)">DELETE</button>
                </div>
              </div>
            </div>
          </div>           
      </div>
    </div>
    <head>
      <title>Layer Spy</title>
      <link rel="stylesheet" href="https://openlayers.org/en/v5.3.0/css/ol.css" type="text/css">
      <!-- The line below is only needed for old environments like Internet Explorer and Android 4.x -->
      <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
  
    </head>
    <body>
      <div id="map" class="map"></div>
      <script>
        import Map from 'ol/Map.js';
        import View from 'ol/View.js';
        import TileLayer from 'ol/layer/Tile.js';
        import {fromLonLat} from 'ol/proj.js';
        import BingMaps from 'ol/source/BingMaps.js';
  
        var key = 'Your Bing Maps Key from http://www.bingmapsportal.com/ here';
  
        var roads = new TileLayer({
          source: new BingMaps({key: key, imagerySet: 'Road'})
        });
  
        var imagery = new TileLayer({
          source: new BingMaps({key: key, imagerySet: 'Aerial'})
        });
  
        var container = document.getElementById('map');
  
        var map = new Map({
          layers: [roads, imagery],
          target: container,
          view: new View({
            center: fromLonLat([-109, 46.5]),
            zoom: 6
          })
        });
  
        var radius = 75;
        document.addEventListener('keydown', function(evt) {
          if (evt.which === 38) {
            radius = Math.min(radius + 5, 150);
            map.render();
            evt.preventDefault();
          } else if (evt.which === 40) {
            radius = Math.max(radius - 5, 25);
            map.render();
            evt.preventDefault();
          }
        });
  
        // get the pixel position with every move
        var mousePosition = null;
  
        container.addEventListener('mousemove', function(event) {
          mousePosition = map.getEventPixel(event);
          map.render();
        });
  
        container.addEventListener('mouseout', function() {
          mousePosition = null;
          map.render();
        });
  
        // before rendering the layer, do some clipping
        imagery.on('precompose', function(event) {
          var ctx = event.context;
          var pixelRatio = event.frameState.pixelRatio;
          ctx.save();
          ctx.beginPath();
          if (mousePosition) {
            // only show a circle around the mouse
            ctx.arc(mousePosition[0] * pixelRatio, mousePosition[1] * pixelRatio,
              radius * pixelRatio, 0, 2 * Math.PI);
            ctx.lineWidth = 5 * pixelRatio;
            ctx.strokeStyle = 'rgba(0,0,0,0.5)';
            ctx.stroke();
          }
          ctx.clip();
        });
  
        // after rendering the layer, restore the canvas context
        imagery.on('postcompose', function(event) {
          var ctx = event.context;
          ctx.restore();
        });
      </script>
    </body>     
</div>
</div>

